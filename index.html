<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PURIFY: PURIFY</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PURIFY
   </div>
   <div id="projectbrief">Next-generation radio interferometric imaging</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PURIFY </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.com/astro-informatics/purify"><object type="image/svg+xml" data="https://travis-ci.com/astro-informatics/purify.svg?branch=development" style="pointer-events: none;">Build Status</object></a> <a href="https://codecov.io/gh/astro-informatics/purify"><object type="image/svg+xml" data="https://codecov.io/gh/astro-informatics/purify/branch/development/graph/badge.svg" style="pointer-events: none;">codecov</object></a> <a href="https://doi.org/10.5281/zenodo.2555252"><object type="image/svg+xml" data="https://zenodo.org/badge/DOI/10.5281/zenodo.2555252.svg" style="pointer-events: none;">DOI</object></a></p>
<h1>Description</h1>
<p><b>PURIFY</b> is an open-source collection of routines written in <code>C++</code> available under the <a href="#license">license</a> below. It implements different tools and high-level to perform radio interferometric imaging, <em>i.e.</em> to recover images from the Fourier measurements taken by radio interferometric telescopes.</p>
<p><b>PURIFY</b> leverages recent developments in the field of compressive sensing and convex optimization. Low-level functionality to solve the resulting convex optimisation is factored into the open-source companion code, <a href="https://github.com/astro-informatics/sopt"><b>SOPT</b></a>, also written by the authors of <b>PURIFY</b>. For further background please see the <a href="#references-and-citation">reference</a> section.</p>
<p>This documentation outlines the necessary and optional <a href="#dependencies-installation">dependencies</a> upon which <b>PURIFY</b> should be built, before describing <a href="#installing-and-building-PURIFY">installation</a>, <a href="#testing">testing</a> and <a href="#usage">usage</a> details. <a href="#contributors">Contributors</a>, <a href="#references-and-citation">references</a> and <a href="#license">license</a> information then follows.</p>
<h1>Dependencies installation</h1>
<p><b>PURIFY</b> is written in <code>C++11</code>. Required software and libraries, and their minimum supported versions, are listed below. The build system will attempt to automatically download and build the automatically included libraries. (an internet connection is required for this).</p>
<p><code>C++</code> dependencies:</p>
<ul>
<li><a href="http://www.cmake.org/">CMake</a> v3.5.1 A free software that allows cross-platform compilation</li>
<li><a href="https://gcc.gnu.org">GCC</a> v7.3.0 GNU compiler for <code>C++</code></li>
<li><a href="http://openmp.org/wp/">OpenMP</a> v4.8.4 - Optional - Speeds up some of the operations.</li>
<li><a href="https://www.open-mpi.org">MPI</a> v3.1.1 - Optional - Parallelisation paradigm to speed up operations.</li>
<li><a href="https://github.com/astro-informatics/sopt">astro-informatics/sopt</a> v4.1.0: Sparse Optimization Compressed Sensing library. Included as a submodule.</li>
<li><a href="https://www.boost.org/">Boost</a> v1.78.0: A set of free peer-reviewed portable C++ libraries.</li>
<li><a href="www.fftw.org">fftw3</a> v3.3.9: Fastest Fourier Transform in the West.</li>
<li><a href="http://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen3</a> v3.3.7: Modern <code>C++</code> linear algebra.</li>
<li><a href="http://www.libtiff.org/">tiff</a> v4.0.9: Tag Image File Format library.</li>
<li><a href="http://heasarc.gsfc.nasa.gov/fitsio/fitsio.html">cfitsio</a>: v4.0.0: Library of <code>C</code> and <code>Fortran</code> subroutines for reading and writing data files in FITS (Flexible Image Transport System) data format.</li>
<li><a href="https://github.com/jbeder/yaml-cpp">yaml-cpp</a> v0.6.3: YAML parser and emitter in <code>C++</code>.</li>
<li><a href="http://casacore.github.io/casacore/">casacore</a> - Optional - Needed to interface with measurement</li>
<li><a href="https://onnxruntime.ai/">ONNXruntime</a> v1.17.1 - Optional - a cross-platform runtime engine based on the Open Neural Network eXchange format. sets. The main <b>PURIFY</b> program requires this library (and its dependencies)</li>
<li><a href="https://github.com/catchorg/Catch2">Catch2</a> v2.13.9: Optional - A <code>C++</code> unit-testing framework only needed for testing.</li>
<li><a href="https://github.com/google/benchmark">google/benchmark</a> v1.6.0: Optional - A <code>C++</code> micro-benchmarking framework only needed for benchmarks.</li>
</ul>
<p>For examples on how to install dependencies on Ubuntu and MacOS, see the <a href="https://github.com/astro-informatics/purify/blob/development/.github/workflows/cmake.yml">cmake.yml</a>.</p>
<h1>Installing and building PURIFY</h1>
<p>If the dependencies are already available on your system, you can also install <b>PURIFY</b> manually like so</p>
<div class="fragment"><div class="line">cd /path/to/code</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake .. -DCMAKE_INSTALL_PREFIX=${PWD}/../local</div>
<div class="line">make -j</div>
<div class="line">make -j install</div>
</div><!-- fragment --><p>On MacOS, you can also install most of the dependencies with Homebrew e.g.</p>
<div class="fragment"><div class="line">brew install boost fftw  eigen yaml-cpp spdlog catch2</div>
</div><!-- fragment --><h2>Machine-learning models</h2>
<p>The <b>SOPT</b> library includes an interface to ONNXrt for using trained models as priors in the Forward-Backward optimization algorithm. To build <b>PURIFY</b> with ONNXrt capability, you need to enable <code>ONNXrt</code> support also in <b>SOPT</b> using the <code>onnxrt</code> option when running the <code>cmake</code> command.</p>
<h1>Testing</h1>
<p>To check everything went all right, run the test suite:</p>
<div class="fragment"><div class="line">cd /path/to/purify/build</div>
<div class="line">ctest .</div>
</div><!-- fragment --><h1>Usage</h1>
<p>The main <code>purify</code> executable lives either in the build directory or in the in the <code>bin</code> subdirectory of the installation directory. <code>purify</code> has one required argument, it a string for the file path of the config file containing the settings.</p>
<p><code>purify path/to/config.yaml</code>.</p>
<p>A <a href="https://github.com/astro-informatics/purify/blob/development/data/config/config.yaml">template with a description of the settings</a> is included in the <code>data/config</code> directory. When <code>purify</code> runs a directory will be created, and the output images will be saved and time-stamped. Additionally, a config file with the settings used will be saved and time-stamped, helping for reproducibility and book-keeping.</p>
<h1>Debugging the CI workflow with tmate</h1>
<p>The CI workflow has a manual dispatch trigger which allows you to log into the job while it's running. You can trigger it in <a href="https://github.com/astro-informatics/purify/actions/workflows/cmake.yml">actions</a>. Run the workflow and set <code>debug_enabled=true</code> to enable the <code>tmate</code> step in the CI workflow. Once the workflow is running, open the job in actions. You should see it printing out a line with a <code>ssh</code> command. Run it in terminal to log into the GitHub Actions runner.</p>
<h1>Docker</h1>
<p>A Dockerfile is available on DockerHub. We are currently not maintaining it, and cannot guarantee it is up to date. Use the below documentation at your own risk.</p>
<p>If you want to use Docker instead, you can build an image using the Dockerfile available in the repository or pulling it from <a href="https://hub.docker.com/r/uclrits/purify">DockerHub</a>.</p>
<div class="fragment"><div class="line">docker build -t purify .</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">docker pull uclrits/purify</div>
</div><!-- fragment --><p>Then to use it, you should mount the directory with your data and config files to <code>/mydata</code> in the container. To run the container and mount the directory is with:</p>
<div class="fragment"><div class="line">docker run -it --name purify -v /full/path/to/data:/mydata uclrits/purify</div>
</div><!-- fragment --><p>That will start a shell inside the container in the <code>/mydata</code> directory where you can see all the files from your <code>/full/path/to/data</code>. There you can run <code>purify</code> as shown above.`</p>
<h1>Contributors</h1>
<p>Check the <a class="el" href="purify_contributors.html">contributors</a> page (<a class="el" href="PURIFY__CONTRIBUTORS_8md.html">github</a>).</p>
<h1>References and citation</h1>
<p>If you use <b>PURIFY</b> for work that results in publication, please reference the <a href="#webpage">webpage</a> and our related academic papers:</p>
<ol type="1">
<li>L. Pratley, et al. "Distributed convex optimization for Radio Interferometry with PURIFY". Link will be here soon!</li>
<li>L. Pratley, M. Johnston-Hollitt, J. D. McEwen, "A fast and exact w-stacking and w-projection hybrid algorithm for wide-field interferometric imaging". Submitted to ApJ <a href="https://arxiv.org/abs/1807.09239">arXiv:1807.09239</a></li>
<li>L. Pratley, J. D. McEwen, M. d'Avezac, R. E. Carrillo, A. Onose, Y. Wiaux. "Robust sparse image
   reconstruction of radio interferometric observations with PURIFY". Accepted (2016) <a href="https://arxiv.org/abs/1610.02400v2">arxiv:1610.02400</a></li>
<li>A. Onose, R. E. Carrillo, A. Repetti, J. D. McEwen, J.-P. Thiran, J.-C. Pesquet, and Y. Wiaux. "Scalable splitting algorithms for big-data interferometric imaging in the SKA era" <em>Mon. Not. Roy. Astron. Soc.</em> <b>462(4):4314-4335</b> (2016) <a href="http://arxiv.org/abs/arXiv:1601.04026">arXiv:1601.04026</a></li>
<li>R. E. Carrillo, J. D. McEwen and Y. Wiaux. "PURIFY: a new approach to radio-interferometric
   imaging". <em>Mon. Not. Roy. Astron. Soc.</em> <b>439(4):3591-3604</b> (2014) <a href="http://arxiv.org/abs/1307.4370">arXiv:1307.4370</a></li>
</ol>
<h1>License</h1>
<blockquote class="doxtable">
<p>PURIFY Copyright (C) 2013-2019</p>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details (LICENSE.txt).</p>
<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA. </p>
</blockquote>
<h1>Webpage</h1>
<ul>
<li><a href="http://astro-informatics.github.io/purify">Documentation</a></li>
<li><a href="https://github.com/astro-informatics/purify">Repository</a></li>
</ul>
<h1>Support</h1>
<p>For any questions or comments, feel free to contact <a href="http://www.jasonmcewen.org">Jason McEwen</a>, or add an issue to the <a href="https://github.com/astro-informatics/purify/issues">issue tracker</a>.</p>
<h1>Notes</h1>
<p>The code is given for educational purpose. The code is in beta and still under development. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
